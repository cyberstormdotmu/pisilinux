<?xml version="1.0" ?>
<!DOCTYPE PISI SYSTEM "http://www.pisilinux.org/projeler/pisi/pisi-spec.dtd">
<PISI>
    <Source>
        <Name>module-fglrx-legacy</Name>
        <Homepage>http://ati.amd.com/support/driver.html</Homepage>
        <Packager>
            <Name>PisiLinux Community</Name>
            <Email>admins@pisilinux.org</Email>
        </Packager>
        <License>ATI</License>
        <Summary>ATI display drivers</Summary>
        <Description>Fglrx is a driver written by AMD(ATI) for ATI graphics cards.</Description>
        <Archive sha1sum="e886a3ca4a15781814a571e17577837cc4f282f2" type="zip">http://www2.ati.com/drivers/legacy/amd-driver-installer-catalyst-13.1-legacy-linux-x86.x86_64.zip</Archive>
        <AdditionalFiles>
            <AdditionalFile target="ati-powermode.patch">ati-powermode.patch</AdditionalFile>
            <AdditionalFile target="3.5-do_mmap.patch">arch/3.5-do_mmap.patch</AdditionalFile>
            <AdditionalFile target="arch-fglrx-3.7.patch">arch/arch-fglrx-3.7.patch</AdditionalFile>
            <AdditionalFile target="arch-fglrx-3.8.patch">arch/arch-fglrx-3.8.patch</AdditionalFile>
            <AdditionalFile target="arch-fglrx-authatieventsd.patch">arch/arch-fglrx-authatieventsd.patch</AdditionalFile>
            <AdditionalFile target="kolasa_foutrelis_fglrx_3.10.patch">arch/kolasa_foutrelis_fglrx_3.10.patch</AdditionalFile>
            <AdditionalFile target="lano1106_fglrx_intel_iommu.patch">arch/lano1106_fglrx_intel_iommu.patch</AdditionalFile>
            <AdditionalFile target="lano1106_kcl_agp_13_4.patch">arch/lano1106_kcl_agp_13_4.patch</AdditionalFile>
            <AdditionalFile target="makefile_compat.patch">arch/makefile_compat.patch</AdditionalFile>
            <AdditionalFile target="desktop-files.patch">desktop-files.patch</AdditionalFile>
        </AdditionalFiles>
        <BuildDependencies>
            <Dependency versionFrom="3.10.0">kernel-module-headers</Dependency>
        </BuildDependencies>
    </Source>

    <Package>
        <Name>module-fglrx-legacy</Name>
        <Conflicts>
            <Package>module-fglrx</Package>
        </Conflicts>
        <IsA>driver</IsA>
        <Summary>Kernel module for ATI display drivers</Summary>
        <RuntimeDependencies>
            <Dependency versionFrom="3.10.0">kernel</Dependency>
            <Dependency version="current">module-fglrx-legacy-userspace</Dependency>
        </RuntimeDependencies>
        <Files>
            <Path fileType="library" permanent="true">/lib/modules</Path>
        </Files>
        <BuildFlags>
            <Flag>noDelta</Flag>
        </BuildFlags>
    </Package>

    <Package>
        <Name>module-fglrx-legacy-userspace</Name>
        <Conflicts>
            <Package>module-fglrx-userspace</Package>
        </Conflicts>
        <IsA>data</IsA>
        <Summary>Modprobe rules for fglrx kernel driver</Summary>
        <Files>
            <Path fileType="data">/etc/modprobe.d</Path>
        </Files>
        <AdditionalFiles>
            <AdditionalFile owner="root" permission="0644" target="/etc/modprobe.d/fglrx.conf">modprobe.conf</AdditionalFile>
        </AdditionalFiles>
    </Package>

    <Package>
        <Name>fglrx-legacy-devel</Name>
        <Conflicts>
            <Package>fglrx-devel</Package>
        </Conflicts>
        <Files>
            <Path fileType="header">/usr/include</Path>
        </Files>
    </Package>

    <Package>
        <Name>fglrx-legacy-opencl</Name>
        <Conflicts>
            <Package>fglrx-opencl</Package>
        </Conflicts>
        <RuntimeDependencies>
            <Dependency version="current">xorg-video-fglrx-legacy</Dependency>
        </RuntimeDependencies>
        <Files>
            <Path fileType="config">/etc/OpenCL/vendors</Path>
            <Path fileType="executable">/usr/bin/clinfo</Path>
            <Path fileType="library">/usr/lib/libamdocl*.so</Path>
            <Path fileType="library">/usr/lib/libOpenCL.so*</Path>
        </Files>
    </Package>
    <Package>
        <Name>fglrx-legacy-opencl-32bit</Name>
        <Conflicts>
            <Package>fglrx-opencl-32bit</Package>
        </Conflicts>
        <PartOf>emul32</PartOf>
        <Summary>32-bit shared libraries for fglrx-opencl</Summary>
        <BuildType>emul32</BuildType>
        <RuntimeDependencies>
            <Dependency version="current">xorg-video-fglrx-legacy-32bit</Dependency>
            <Dependency version="current">fglrx-legacy-opencl</Dependency>
        </RuntimeDependencies>
        <Files>
            <Path fileType="library">/usr/lib32/libamdocl*.so</Path>
            <Path fileType="library">/usr/lib32/libOpenCL.so*</Path>
        </Files>
    </Package>

    <Package>
        <Name>xorg-video-fglrx-legacy</Name>
        <Conflicts>
            <Package>xorg-video-fglrx</Package>
        </Conflicts>
        <IsA>driver</IsA>
        <PartOf>x11.driver</PartOf>
        <RuntimeDependencies>
            <AnyDependency>
                <Dependency version="current">module-fglrx-legacy</Dependency>
                <Dependency version="current">module-pae-fglrx-legacy</Dependency>
            </AnyDependency>
            <Dependency>xorg-server</Dependency>
            <Dependency>xvba-video</Dependency>
            <Dependency>fontconfig</Dependency>
            <Dependency>libXcursor</Dependency>
            <Dependency>libXext</Dependency>
            <Dependency>libXfixes</Dependency>
            <Dependency>libXinerama</Dependency>
            <Dependency>libXrandr</Dependency>
            <Dependency>libXrender</Dependency>
            <Dependency>libXxf86vm</Dependency>
            <Dependency>xdg-utils</Dependency>
        </RuntimeDependencies>
        <Files>
            <Path fileType="data">/usr/share/applications</Path>
            <Path fileType="data">/usr/share/ati</Path>
            <Path fileType="data">/usr/share/pixmaps</Path>
            <Path fileType="config">/etc/security</Path>
            <Path fileType="config">/etc/pam.d</Path>
            <Path fileType="executable">/usr/bin</Path>
            <Path fileType="executable">/usr/sbin</Path>
            <Path fileType="data">/usr/X11R6</Path>
            <Path fileType="config">/etc/conf.d</Path>
            <Path fileType="data">/etc/ati</Path>
            <Path fileType="data">/etc/acpi</Path>
            <Path fileType="library">/usr/lib</Path>
            <Path fileType="doc">/usr/share/doc</Path>
            <Path fileType="man">/usr/share/man</Path>
            <Path fileType="man">/lib/systemd/system</Path>
        </Files>
        <AdditionalFiles>
            <AdditionalFile owner="root" permission="0644" target="/etc/conf.d/atieventsd">atieventsd</AdditionalFile>
            <AdditionalFile owner="root" permission="0644" target="/lib/systemd/system/atieventsd.service">atieventsd.service</AdditionalFile>
        </AdditionalFiles>
        <Provides>
            <COMAR script="package.py">System.Package</COMAR>
            <COMAR script="service.py" name="atieventsd">System.Service</COMAR>
        </Provides>
    </Package>

    <Package>
        <Name>xorg-video-fglrx-legacy-32bit</Name>
        <Conflicts>
            <Package>xorg-video-fglrx-32bit</Package>
        </Conflicts>
        <PartOf>emul32</PartOf>
        <Summary>32-bit shared libraries for xorg-video-fglrx</Summary>
        <BuildType>emul32</BuildType>
        <BuildDependencies>
            <Dependency>xvba-video-32bit</Dependency>
            <Dependency>fontconfig-32bit</Dependency>
            <Dependency>freetype-32bit</Dependency>
            <Dependency>libXcursor-32bit</Dependency>
            <Dependency>libXext-32bit</Dependency>
            <Dependency>libXfixes-32bit</Dependency>
            <Dependency>libXinerama-32bit</Dependency>
            <Dependency>libXrandr-32bit</Dependency>
            <Dependency>libXrender-32bit</Dependency>
            <Dependency>libXxf86vm-32bit</Dependency>
            <Dependency>libX11-32bit</Dependency>
        </BuildDependencies>
        <RuntimeDependencies>
            <Dependency release="current">xorg-video-fglrx-legacy</Dependency>
            <Dependency>xvba-video-32bit</Dependency>
            <Dependency>fontconfig-32bit</Dependency>
            <Dependency>freetype-32bit</Dependency>
            <Dependency>libXcursor-32bit</Dependency>
            <Dependency>libXext-32bit</Dependency>
            <Dependency>libXfixes-32bit</Dependency>
            <Dependency>libXinerama-32bit</Dependency>
            <Dependency>libXrandr-32bit</Dependency>
            <Dependency>libXrender-32bit</Dependency>
            <Dependency>libXxf86vm-32bit</Dependency>
            <Dependency>libX11-32bit</Dependency>
        </RuntimeDependencies>
        <Files>
            <Path fileType="library">/usr/lib32</Path>
        </Files>
        <Provides>
            <COMAR script="package-emul32.py">System.Package</COMAR>
        </Provides>
    </Package>

    <History>
        <Update release="6">
            <Date>2013-07-08</Date>
            <Version>13.1</Version>
            <Comment>version bump</Comment>
            <Name>Erdinç Gültekin</Name>
            <Email>erdincgultekin@pisilinux.org</Email>
        </Update>
        <Update release="5">
            <Date>2013-06-15</Date>
            <Version>12.6</Version>
            <Comment>rebuild for Kernel 3.8.13</Comment>
            <Name>Erdinç Gültekin</Name>
            <Email>erdincgultekin@pisilinux.org</Email>
        </Update>
        <Update release="4">
            <Date>2013-06-01</Date>
            <Version>12.6</Version>
            <Comment>rebuild for Kernel 3.9.4</Comment>
            <Name>Erdinç Gültekin</Name>
            <Email>erdincgultekin@pisilinux.org</Email>
        </Update>
        <Update release="3">
            <Date>2013-05-26</Date>
            <Version>12.6</Version>
            <Comment>Fix build with latest kernels</Comment>
            <Name>Marcin Bojara</Name>
            <Email>marcin@pisilinux.org</Email>
        </Update>
        <Update release="2">
            <Date>2013-05-26</Date>
            <Version>12.6</Version>
            <Comment>Kernel 3.9.3</Comment>
            <Name>Osman Erkan</Name>
            <Email>osman.erkan@pisilinux.org</Email>
        </Update>
        <Update release="1">
            <Date>2012-10-08</Date>
            <Version>12.6</Version>
            <Comment>First release</Comment>
            <Name>Erdem Artan</Name>
            <Email>admins@pisilinux.org</Email>
        </Update>
    </History>
</PISI>
